{"componentChunkName":"component---src-templates-blog-post-js","path":"/react","result":{"data":{"site":{"siteMetadata":{"title":"Michael Blog","author":"Michael Luo"}},"markdownRemark":{"id":"193252d0-8363-5068-8da4-c369cea03342","excerpt":"React Notes Communicate Child to Parent Since there is no way to communicate between siblings (only\nparent to child and vice versa), keeping the state at the…","html":"<h1>React Notes</h1>\n<h2>Communicate Child to Parent</h2>\n<p>Since there is no way to communicate between siblings (only\nparent to child and vice versa), keeping the state at the root\nof the hierarchy is the best strategy.</p>\n<h2>Spread Operator</h2>\n<p>“spread” operator to pass the whole props object.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token attr-name\">firstName</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Ben<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">lastName</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Hector<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> props <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>firstName<span class=\"token operator\">:</span> <span class=\"token string\">'Ben'</span><span class=\"token punctuation\">,</span> lastName<span class=\"token operator\">:</span> <span class=\"token string\">'Hector'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Object rest spread (Redux example)</h2>\n<p><a href=\"http://redux.js.org/docs/recipes/UsingObjectSpreadOperator.html\">http://redux.js.org/docs/recipes/UsingObjectSpreadOperator.html</a></p>\n<h2>Required module as default</h2>\n<ul>\n<li>Create a index.js module</li>\n<li>improt A from ‘./folder_name’</li>\n</ul>\n<h2>React Router</h2>\n<p><code class=\"language-text\">withRouter</code> will cause rerender if enable it in <code class=\"language-text\">Route</code>, it has bo be used when export component.</p>\n<h2>Fragment</h2>\n<p>A common pattern in React is for a component to return multiple elements. Fragments let you group a list of children without adding extra nodes to the DOM.</p>\n<h2>Using the state</h2>\n<ol>\n<li>We should always keep in mind that only the minimal amount of data needed should be put into the state</li>\n<li>We should add to the state only the values that we want to update when an event happens, and for which we want to make the component re-render.</li>\n</ol>\n<h2>Should component update</h2>\n<ol>\n<li>Dont’ duplicate data from props in state, calculate what you can in render() method</li>\n<li>Don’t keep something in the state if you don’t use it for rendering, For example, API subscriptions are better off as custom private fields or variables in external modules.</li>\n</ol>\n<h2>Container and Presentational pattern</h2>\n<blockquote>\n<p>Container components</p>\n</blockquote>\n<ul>\n<li>They are more concerned about the behavior</li>\n<li>They render their presentational components</li>\n<li>They make API calls and manipulate data</li>\n<li>They define event handlers</li>\n<li>They are written as classes</li>\n</ul>\n<blockquote>\n<p>Presentational components`</p>\n</blockquote>\n<ul>\n<li>They are more concerned with the visual representation</li>\n<li>They render the HTML markup (or other components)</li>\n<li>They receive data from the parents in the form of props</li>\n<li>They are often written as stateless functional components</li>\n</ul>\n<h2>Function as Child</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FunctionAsChild</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nFunctionAsChild<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">.</span>isRequired\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Uncontrolled Components</h2>\n<p>where we do not set the value of the input field, but we let the component manage its internal state.</p>\n<h2>Controlled Components</h2>\n<p>We have full control over the value of the fields</p>\n<h2>Event</h2>\n<blockquote>\n<p>Synthetic Event is an object that wraps the original event object provided by the browser, and it has the same properties, no matter the browser where it is created.</p>\n</blockquote>\n<ul>\n<li><strong>event bubbling</strong>: What it does instead is attach a single event handler to the root element, which listens to all the events,</li>\n<li><strong>single global handler</strong>: When an event we are interested in is fired by the browser, React calls the handler on the specific components on its behalf.</li>\n</ul>\n<h2>Server side rendering</h2>\n<ul>\n<li>SEO :One of the main reasons we may want to render our applications on the server-side is Search Engine Optimization (SEO).</li>\n<li>A common code base: We do not have many options on the client: our applications have to be written in JavaScript. There are some languages that can be converted into JavaScript at build time, but the concept does not change.</li>\n<li>Better performance:we all love client-side applications, because they are fast and responsive, but there is a problem: the bundle has to be loaded and run before users can take any action on the application.</li>\n</ul>\n<blockquote>\n<p>SSR or not</p>\n</blockquote>\n<ul>\n<li>If your page is non-interactive don’t render it in the browser (Only render the page to HTML on the server.) (Not only is computational time saved by skipping rendering to the DOM but also load time is saved by skipping loading JavaScript code.)</li>\n<li>If your page is non-interactive and doesn’t change on every request, then render it on the server at build-time.</li>\n<li>The SSR should be enabled on when strictly needed. For example, if you need SEO or if you need to customize the social sharing information, you should start thinking about it.</li>\n<li>If you realize that your application takes a lot of time to fully load and you have already done all the optimization (see the following chapter for more about this topic), you can consider using server-side rendering to offer a better experience to your users and improve the perceived speed.</li>\n</ul>\n<h2>Optimization</h2>\n<ul>\n<li><strong>Webpack UglifyJsPlugin</strong></li>\n<li><strong>Should component update</strong></li>\n<li>\n<p><strong>PurComponent</strong> always re-render if the state or props reference a new object. This implies that if we do not want to lose the benefits of <code class=\"language-text\">PureComponent</code>, we should avoid such structures:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>Entity values<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>values <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>It is important to remember, that <code class=\"language-text\">PureComponent</code> skips the re-render operation not only for component itself, but also for all its children, so the <code class=\"language-text\">best use case</code> for <code class=\"language-text\">PureComponent</code> are presentational components which have no child components and no dependencies on the global state in the application.</p>\n</li>\n<li><strong>Stateless functional components</strong>: Another concept that is sometimes counter-intuitive for beginners is the fact that stateless components do not give us any benefits regarding performance.</li>\n</ul>\n<h2>Testing</h2>\n<p>There are generally two ways of testing React components, by:</p>\n<ul>\n<li>Shallow rendering</li>\n<li>Mounting the components into a detached DOM</li>\n</ul>\n<p>Before starting, it is important to have a clear idea about what we want to test and why.\nThe following list represents more or less all the variations and functionalities of the component that are worth testing:</p>\n<ul>\n<li>The state is initialized with the value coming from the props</li>\n<li>The placeholder prop is correctly used in the element</li>\n<li>The right class names are applied following the conditional logic</li>\n<li>The state is updated whenever the value of the field changes</li>\n<li>The onSave callback is fired according to the different states and conditions</li>\n</ul>\n<p><code class=\"language-text\">Snapshot Testing</code>: Snapshots are pictures of the component with some props at a given point in time. Every time we run the tests, Jest creates new pictures and it compares them with the previous ones to check if something has changed, and It shows us what’s changed in the current snapshot.</p>\n<p><code class=\"language-text\">Test coverage</code>: in some scenarios it is useful to get some measurement of the coverage and keep track of the numbers. In big projects with many different modules, doing so makes it easy to spot files that have not been adequately tested or that have not been tested at all.</p>\n<h3>Common testing solutions</h3>\n<ul>\n<li>Testing Higher-Order Components</li>\n<li>The Page Object pattern</li>\n</ul>\n<h3>Error handling with React</h3>\n<p>The best thing we can do when problems happen in our applications is:</p>\n<ul>\n<li>Notify the users and help them understand what happened and what they should do</li>\n<li>Collect all useful information about the error and the state of the application in order to reproduce it and fix bugs quickly</li>\n</ul>\n<h2>Avoid Anti-pattern</h2>\n<ol>\n<li>Map data key</li>\n<li>The key has to be unique and stable, identifying one, and only one, item</li>\n<li>use the value of the item if we expect it not to be repeated within the list, or create a unique identifier.</li>\n<li>Spreading props on DOM elements</li>\n<li>create a prop called domProps that we can spread safely to the component because we are explicitly saying that it contains valid DOM properties</li>\n</ol>\n<h2>HOC</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// We receive a component constructor as an argument</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeRed</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">Component</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// We make a new component constructor that takes props, just as any component</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">wrappedComponent</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// This new component returns the original component, but with the style applied</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">// But we also use the ES6 spread operator to apply the regular props passed in.</span>\n      <span class=\"token comment\">// The spread operator applies props like the text in &lt;RedButton text=\"hello\" /></span>\n      <span class=\"token comment\">// to our new component</span>\n      <span class=\"token comment\">// It will \"spread\" any and all props across our component</span>\n      <span class=\"token operator\">&lt;</span>Component\n        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> backgroundColor<span class=\"token operator\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">:</span> <span class=\"token string\">\"white\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// We return the new constructor, so it can be called as &lt;RedButton /> or &lt;RedAlertBox /></span>\n  <span class=\"token keyword\">return</span> wrappedComponent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> makeRed<span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"React Notes!","date":"March 02, 2019"}}},"pageContext":{"slug":"react","previous":{"fields":{"slug":"testing"},"frontmatter":{"title":"Notes for testing!"}},"next":null}}}